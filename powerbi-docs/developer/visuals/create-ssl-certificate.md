---
title: Create an SSL certificate
description: Work around instructions to create certificates manually for developer server
author: KesemSharabi
ms.author: kesharab
ms.reviewer: sranins
ms.service: powerbi
ms.subservice: powerbi-custom-visuals
ms.topic: reference
ms.date: 06/18/2019
---

# Create an SSL certificate

This article describes how to create an SSL certificate.

To generate the certificate by using the PowerShell `New-SelfSignedCertificate` cmdlet on Windows 8 or later, run the following command:

```cmd
pbiviz --install-cert
```

The tool requires an OpenSSL installation for Windows 7. The OpenSSL utility must be available from the command line.

To install OpenSSL, go to the [OpenSSL](https://www.openssl.org) or [OpenSSL Binaries](https://wiki.openssl.org/index.php/Binaries) site.

## Create a certificate (Mac OS X)

Usually, the OpenSSL utility is available in the Linux or Mac OS X operating system.

You can also install the utility by running either of the following commands:

* From the *Brew* package manager:

    ```cmd
    brew install openssl
    brew link openssl --force
    ```

* By using *MacPorts*:

    ```cmd
    sudo port install openssl
    ```

After you install the OpenSSL utility for generating a new certificate, run the following command:

```cmd
pbiviz --install-cert
```

## Create a certificate (Linux)
### Before install

Please make sure you have the `openssl` and `certutil` installed.

```sh
which openssl
which certutil
```

If they are not installed, please install the `openssl` and `libnss3` utils first.

### SSL config

Please create the `/tmp/openssl.cnf` file and place the text below.

```
authorityKeyIdentifier=keyid,issuer
basicConstraints=CA:FALSE
keyUsage = digitalSignature, nonRepudiation, keyEncipherment, dataEncipherment
subjectAltName = @alt_names

[ alt_names ]
DNS.1=localhost
```

### Generate root certificate authority to sign local certificates

Generate root certificate authority using the following commands:
```sh
touch $HOME/.rnd
openssl req -x509 -nodes -new -sha256 -days 1024 -newkey rsa:2048 -keyout /tmp/local-root-ca.key -out /tmp/local-root-ca.pem -subj "/C=US/CN=Local Root CA/O=Local Root CA"
openssl x509 -outform pem -in /tmp/local-root-ca.pem -out /tmp/local-root-ca.crt
```

### Generate certificate for localhost using the generated CA and openssl.cnf
Generate certificate for localhost using the following commands:
```sh
PBIVIZ=`which pbiviz`
PBIVIZ=`dirname $PBIVIZ`
PBIVIZ="$PBIVIZ/../lib/node_modules/powerbi-visuals-tools/certs"
# please make sure that $PBIVIZ contains the correct cert dir path (ls $PBIVIZ should list 'blank' file)
openssl req -new -nodes -newkey rsa:2048 -keyout $PBIVIZ/PowerBICustomVisualTest_private.key -out $PBIVIZ/PowerBICustomVisualTest.csr -subj "/C=US/O=PowerBI Custom Visuals/CN=localhost"
openssl x509 -req -sha256 -days 1024 -in $PBIVIZ/PowerBICustomVisualTest.csr -CA /tmp/local-root-ca.pem -CAkey /tmp/local-root-ca.key -CAcreateserial -extfile /tmp/openssl.cnf -out $PBIVIZ/PowerBICustomVisualTest_public.crt
```

### Add certs to Chrome/Firefox/system-wide

#### Add root certificate to the Chrome's DB

```sh
certutil -A -n "Local Root CA" -t "CT,C,C" -i /tmp/local-root-ca.pem -d sql:$HOME/.pki/nssdb
```

#### Add root certificate to the Mozilla's DB

```sh
for certDB in $(find $HOME/.mozilla* -name "cert*.db")
do
certDir=$(dirname ${certDB});
certutil -A -n "Local Root CA" -t "CT,C,C" -i /tmp/local-root-ca.pem -d sql:${certDir}
done
```

#### Add root certificate system-wide

```sh
sudo cp /tmp/local-root-ca.pem /usr/local/share/ca-certificates/
sudo update-ca-certificates
```

### Remove root certificate
```sh
sudo rm /usr/local/share/ca-certificates/local-root-ca.pem
sudo update-ca-certificates --fresh
```

## Generate the certificate manually

You can specify that your certificates be generated by any tools.

If the OpenSSL utility is already installed in your system, generate a new certificate by running the following commands:

```cmd
openssl req -x509 -newkey rsa:4096 -keyout PowerBICustomVisualTest_private.key -out PowerBICustomVisualTest_public.crt -days 365
```

You can usually find the PowerBI-visuals-tools web server certificates by running one the following:

* For the global instance of the tools:

    ```cmd
    %appdata%\npm\node_modules\PowerBI-visuals-tools\certs
    ```

* For the local instance of the tools:

    ```cmd
    <custom visual project root>\node_modules\PowerBI-visuals-tools\certs
    ```

If you use the PEM format, save the certificate file as *PowerBICustomVisualTest_public.crt*, and save privateKey as *PowerBICustomVisualTest_public.key*.

If you use the PFX format, save the certificate file as *PowerBICustomVisualTest_public.pfx*.

If your PFX certificate file requires a passphrase, do the following:
1. In the config file, specify:

    ```cmd
    \PowerBI-visuals-tools\config.json
    ```

1. In the `server` section, specify the passphrase by replacing the "*YOUR PASSPHRASE*" placeholder:

    ```cmd
    "server":{
        "root":"webRoot",
        "assetsRoute":"/assets",
        "privateKey":"certs/PowerBICustomVisualTest_private.key",
        "certificate":"certs/PowerBICustomVisualTest_public.crt",
        "pfx":"certs/PowerBICustomVisualTest_public.pfx",
        "port":"8080",
        "passphrase":"YOUR PASSPHRASE"
    }
    ```